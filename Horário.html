<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Sistema de Horários Escolares</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; }
  .tab { display: none; }
  .tab.active { display: block; }
  button { margin: 5px; }
  table { border-collapse: collapse; width: 100%; margin-top: 10px; }
  th, td { border: 1px solid #000; padding: 5px; text-align: center; }
</style>
</head>
<body>

<h1>Sistema de Horários Escolares</h1>

<!-- Abas -->
<button onclick="showTab('cadastro')">Cadastro</button>
<button onclick="showTab('montar')">Montar Horário</button>

<!-- Aba Cadastro -->
<div id="cadastro" class="tab active">
  <h2>Cadastro</h2>

  <h3>Turma</h3>
  <input type="text" id="nomeTurma" placeholder="Nome da Turma">
  <button onclick="cadastrarTurma()">Cadastrar Turma</button>
  <ul id="listaTurmas"></ul>

  <h3>Disciplina</h3>
  <input type="text" id="nomeDisciplina" placeholder="Nome da Disciplina">
  <button onclick="cadastrarDisciplina()">Cadastrar Disciplina</button>
  <ul id="listaDisciplinas"></ul>

  <h3>Professor</h3>
  <input type="text" id="nomeProfessor" placeholder="Nome do Professor">
  <select id="disciplinasProfessor" multiple></select>
  <input type="number" id="metaAulas" placeholder="Meta de aulas por disciplina">
  <button onclick="cadastrarProfessor()">Cadastrar Professor</button>
  <ul id="listaProfessores"></ul>
</div>

<!-- Aba Montar Horário -->
<div id="montar" class="tab">
  <h2>Montar Horário</h2>

  <label>Turma:</label>
  <select id="turmaHorario"></select>
  <label>Dia:</label>
  <select id="diaHorario">
    <option value="Segunda">Segunda</option>
    <option value="Terça">Terça</option>
    <option value="Quarta">Quarta</option>
    <option value="Quinta">Quinta</option>
    <option value="Sexta">Sexta</option>
  </select>
  <label>Horário:</label>
  <input type="time" id="horaHorario">
  <label>Disciplina:</label>
  <select id="disciplinaHorario"></select>
  <label>Professor:</label>
  <select id="professorHorario"></select>
  <button onclick="adicionarHorario()">Adicionar</button>

  <h3>Horário Montado</h3>
  <table>
    <thead>
      <tr>
        <th>Turma</th>
        <th>Dia</th>
        <th>Hora</th>
        <th>Disciplina</th>
        <th>Professor</th>
      </tr>
    </thead>
    <tbody id="tabelaHorario"></tbody>
  </table>
</div>

<script>
  let turmas = [];
  let disciplinas = [];
  let professores = [];
  let horarios = [];

  function showTab(tab) {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.getElementById(tab).classList.add('active');
    if(tab === 'montar') atualizarSelecoes();
  }

  function cadastrarTurma() {
    const nome = document.getElementById('nomeTurma').value.trim();
    if(nome && !turmas.includes(nome)) {
      turmas.push(nome);
      document.getElementById('listaTurmas').innerHTML += `<li>${nome}</li>`;
      document.getElementById('nomeTurma').value = '';
    }
  }

  function cadastrarDisciplina() {
    const nome = document.getElementById('nomeDisciplina').value.trim();
    if(nome && !disciplinas.includes(nome)) {
      disciplinas.push(nome);
      document.getElementById('listaDisciplinas').innerHTML += `<li>${nome}</li>`;
      document.getElementById('nomeDisciplina').value = '';
      atualizarSelecoes();
    }
  }

  function cadastrarProfessor() {
    const nome = document.getElementById('nomeProfessor').value.trim();
    const selDisciplinas = Array.from(document.getElementById('disciplinasProfessor').selectedOptions).map(o => o.value);
    const meta = parseInt(document.getElementById('metaAulas').value);

    if(nome && selDisciplinas.length && meta > 0) {
      professores.push({ nome, disciplinas: selDisciplinas, metaAulas: meta });
      document.getElementById('listaProfessores').innerHTML += `<li>${nome} - ${selDisciplinas.join(', ')} - Meta: ${meta}</li>`;
      document.getElementById('nomeProfessor').value = '';
      document.getElementById('metaAulas').value = '';
    }
  }

  function atualizarSelecoes() {
    const turmaSel = document.getElementById('turmaHorario');
    turmaSel.innerHTML = turmas.map(t => `<option value="${t}">${t}</option>`).join('');

    const discSel = document.getElementById('disciplinaHorario');
    discSel.innerHTML = disciplinas.map(d => `<option value="${d}">${d}</option>`).join('');

    const profSel = document.getElementById('professorHorario');
    profSel.innerHTML = professores.map(p => `<option value="${p.nome}">${p.nome}</option>`).join('');

    const disciplinasProfessor = document.getElementById('disciplinasProfessor');
    disciplinasProfessor.innerHTML = disciplinas.map(d => `<option value="${d}">${d}</option>`).join('');
  }

  function adicionarHorario() {
    const turma = document.getElementById('turmaHorario').value;
    const dia = document.getElementById('diaHorario').value;
    const hora = document.getElementById('horaHorario').value;
    const disciplina = document.getElementById('disciplinaHorario').value;
    const professor = document.getElementById('professorHorario').value;

    if(!turma || !dia || !hora || !disciplina || !professor) {
      alert('Preencha todos os campos!');
      return;
    }

    // Verificar se professor já está em outra turma no mesmo horário
    const conflito = horarios.find(h => h.professor === professor && h.dia === dia && h.hora === hora);
    if(conflito) {
      alert(`Conflito: Professor ${professor} já está com a turma ${conflito.turma} neste horário.`);
      return;
    }

    horarios.push({ turma, dia, hora, disciplina, professor });
    atualizarTabela();
  }

  function atualizarTabela() {
    const tbody = document.getElementById('tabelaHorario');
    tbody.innerHTML = horarios.map(h => `<tr>
      <td>${h.turma}</td>
      <td>${h.dia}</td>
      <td>${h.hora}</td>
      <td>${h.disciplina}</td>
      <td>${h.professor}</td>
    </tr>`).join('');
  }
</script>

</body>
</html>
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Divisão de Despesas - Professores</title>
<style>
    body {
        font-family: 'Arial', sans-serif;
        background: #f5f7fa;
        margin: 0;
        padding: 0;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
    }
    header {
        background: linear-gradient(90deg, #6a11cb, #2575fc);
        color: white;
        padding: 1rem;
        text-align: center;
        font-size: 1.2rem;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    main {
        flex: 1;
        padding: 1rem;
    }
    .group-select {
        margin-bottom: 1rem;
        text-align: center;
    }
    select {
        padding: 0.5rem;
        border-radius: 6px;
        border: 1px solid #ccc;
        font-size: 1rem;
    }
    .saldos {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
        justify-content: center;
        margin-bottom: 2rem;
    }
    .card {
        flex: 1 1 150px;
        background: white;
        padding: 1rem;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.05);
        text-align: center;
        transition: transform 0.2s;
    }
    .card:hover {
        transform: translateY(-5px);
    }
    .saldo-positivo { color: green; font-weight: bold; }
    .saldo-negativo { color: red; font-weight: bold; }

    table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 2rem;
        background: white;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 4px 8px rgba(0,0,0,0.05);
    }
    th, td {
        padding: 0.75rem;
        text-align: center;
        border-bottom: 1px solid #eee;
    }
    th {
        background: #2575fc;
        color: white;
    }
    tfoot td {
        font-weight: bold;
    }

    .footer {
        padding: 1rem;
        text-align: center;
        background: #f1f3f6;
        box-shadow: 0 -4px 6px rgba(0,0,0,0.05);
    }
    .footer button {
        padding: 0.5rem 1rem;
        margin: 0.5rem;
        border: none;
        border-radius: 6px;
        background: #6a11cb;
        color: white;
        cursor: pointer;
        transition: all 0.3s;
    }
    .footer button:hover {
        background: #2575fc;
    }
    .sugestao {
        margin-top: 1rem;
        font-weight: bold;
    }
</style>
</head>
<body>

<header>
    Sistema de Divisão de Despesas - Professores
</header>

<main>
    <div class="group-select">
        <label for="grupo">Escolha o grupo:</label>
        <select id="grupo">
            <option value="">-- Selecione --</option>
            <option value="A">Grupo A</option>
            <option value="B">Grupo B</option>
        </select>
    </div>

    <div class="saldos" id="saldos">
        <!-- Cards de saldos aparecerão aqui -->
    </div>

    <table id="historico">
        <thead>
            <tr>
                <th>Data</th>
                <th>Descrição</th>
                <th>Valor</th>
                <th>Consumidores</th>
            </tr>
        </thead>
        <tbody>
            <!-- Histórico aparecerá aqui -->
        </tbody>
    </table>

</main>

<div class="footer">
    <button id="exportar">Exportar PNG</button>
    <button id="resetar">Resetar</button>
    <div class="sugestao" id="sugestao">
        <!-- Sugestão de acerto -->
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script>
    const grupos = {
        A: { membros: ['Wanderson', 'Gu', 'Cris'], historico: [], saldos: {} },
        B: { membros: ['Gu', 'Galeno', 'Emerson'], historico: [], saldos: {} }
    };

    const grupoSelect = document.getElementById('grupo');
    const saldosDiv = document.getElementById('saldos');
    const historicoBody = document.querySelector('#historico tbody');
    const sugestaoDiv = document.getElementById('sugestao');

    grupoSelect.addEventListener('change', () => {
        const grupo = grupoSelect.value;
        if (!grupo) return;
        mostrarSaldos(grupo);
        mostrarHistorico(grupo);
        mostrarSugestao(grupo);
    });

    function mostrarSaldos(grupo) {
        saldosDiv.innerHTML = '';
        const g = grupos[grupo];
        g.membros.forEach(nome => {
            if (g.saldos[nome] === undefined) g.saldos[nome] = 0;
            const card = document.createElement('div');
            card.classList.add('card');
            card.innerHTML = `<div>${nome}</div>
                              <div class="${g.saldos[nome]>=0?'saldo-positivo':'saldo-negativo'}">R$ ${g.saldos[nome].toFixed(2)}</div>`;
            saldosDiv.appendChild(card);
        });
    }

    function mostrarHistorico(grupo) {
        historicoBody.innerHTML = '';
        grupos[grupo].historico.forEach(d => {
            const tr = document.createElement('tr');
            tr.innerHTML = `<td>${d.data}</td><td>${d.descricao}</td><td>R$ ${d.valor.toFixed(2)}</td><td>${d.consumidores.join(', ')}</td>`;
            historicoBody.appendChild(tr);
        });
    }

    function mostrarSugestao(grupo) {
        const g = grupos[grupo];
        let texto = 'Sugestão de acerto: ';
        texto += g.membros.map(nome => `${nome}: R$ ${g.saldos[nome].toFixed(2)}`).join(' | ');
        sugestaoDiv.textContent = texto;
    }

    document.getElementById('resetar').addEventListener('click', () => {
        const grupo = grupoSelect.value;
        if (!grupo) return;
        grupos[grupo].historico = [];
        grupos[grupo].saldos = {};
        mostrarSaldos(grupo);
        mostrarHistorico(grupo);
        mostrarSugestao(grupo);
    });

    document.getElementById('exportar').addEventListener('click', () => {
        html2canvas(document.body).then(canvas => {
            const link = document.createElement('a');
            link.download = 'despesas.png';
            link.href = canvas.toDataURL();
            link.click();
        });
    });

    // Para testar, podemos adicionar despesas manualmente
    // Exemplo:
    grupos.A.historico.push({data:'21/08/2025', descricao:'Compras supermercado', valor:90, consumidores:['Wanderson','Gu']});
    grupos.A.saldos['Wanderson'] = 45;
    grupos.A.saldos['Gu'] = 45;
</script>

</body>
</html>